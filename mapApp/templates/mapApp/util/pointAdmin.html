<script>
	/* DRAWING CONTROL TOOLTIPS */
    L.drawLocal.edit.toolbar.buttons.edit = 'Edit points.';
    L.drawLocal.edit.handlers.edit.tooltip.text = 'Drag a point to edit location. Be sure to save changes.';
    L.drawLocal.edit.handlers.edit.tooltip.subtext = 'Click cancel to undo changes.';
        
    L.drawLocal.edit.toolbar.buttons.remove = 'Delete points.';
    L.drawLocal.edit.handlers.remove.tooltip.text = 'Click the points to remove';
    
    L.drawLocal.edit.toolbar.buttons.editDisabled = 'No points to edit.';
    L.drawLocal.edit.toolbar.buttons.removeDisabled = 'No points to delete.';
    

    /* ADD THE CONTROL TO LEAFLET MAP */
    map.addControl(new L.Control.Draw({
        draw: false,        
        edit: 
            {featureGroup: accidentPoints}
    }));

    /* DEFINE ACTIONS TRIGGERED BY EDITING A POINT */
    map.on('draw:edited', function(e) {
        var layers = e.layers;
        layers.eachLayer(function (layer) {
            // Fill out form
            document.getElementById("editPk").value = layer.options.pk;
            document.getElementById("editType").value = 'edit';
            document.getElementById("editGeom").value = JSON.stringify(layer.toGeoJSON().geometry);
            // Submit form
            $( "#adminEditForm" ).submit();

        });
    });

    /* DEFINE ACTIONS TRIGGERED BY DELETING A POINT */
    map.on('draw:deleted', function(e) {
        var layers = e.layers;
        layers.eachLayer(function (layer) {
            // Fill out form
            document.getElementById("editPk").value = layer.options.pk;
            document.getElementById("editType").value = 'delete';
            // Submit form
            $( "#adminEditForm" ).submit();

        });
    });
</script>

<!-- Form for passing data to view to edit polygon data -->
<form id="adminEditForm" action="{% url 'mapApp:editPoint' %}" method="post">
    {% csrf_token %}
    {{ editForm.as_p}}
</form>